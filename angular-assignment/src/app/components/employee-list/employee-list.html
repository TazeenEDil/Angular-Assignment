<div class="container">
  <div class="header-section">
    <h2>Employee List</h2>
    <p class="employee-count">Total Employees: <strong>{{ employees.length }}</strong></p>
  </div>

  @if (loading) {
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Loading employees...</p>
    </div>
  } @else {
    <div class="table-container">
      <table class="employee-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Position</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          @for (emp of employees; track emp.id) {
            <tr (click)="select(emp.id!)"
                [ngClass]="{'selected': selectedId === emp.id}">

              <td>{{ emp.name }}</td>
              <td>{{ emp.email }}</td>
              <td>{{ emp.position }}</td>
              <td class="action-buttons">
                <button class="btn btn-details"
                        (click)="viewDetails(emp.id!); $event.stopPropagation()"
                        title="View Details">
                  <span class="icon">üëÅÔ∏è</span> Details
                </button>
                
                @if (isAdmin) {
                  <button class="btn btn-update"
                          (click)="updateEmployee(emp.id!); $event.stopPropagation()"
                          title="Update Employee">
                    <span class="icon">‚úèÔ∏è</span> Update
                  </button>
                  <button class="btn btn-delete"
                          (click)="deleteEmployee(emp.id!); $event.stopPropagation()"
                          title="Delete Employee">
                    <span class="icon">üóëÔ∏è</span> Delete
                  </button>
                }
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="4" class="no-data">
                <div class="empty-state">
                  <span class="empty-icon">üìã</span>
                  <p>No employees found</p>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>

<app-modal
  [show]="showModal"
  [title]="modalTitle"
  [message]="modalMessage"
  [showCancel]="showCancelButton"
  [confirmText]="showCancelButton ? 'Delete' : 'OK'"
  (confirm)="showCancelButton ? confirmDelete() : closeModal()"
  (cancel)="closeModal()"
  (close)="closeModal()">
</app-modal>